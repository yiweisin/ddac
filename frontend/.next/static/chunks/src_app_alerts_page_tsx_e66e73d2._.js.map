{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/yiweisin/GitHub/ddac/frontend/src/app/alerts/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { PriceAlert } from \"@/types/alert\";\nimport { getPriceAlerts, deletePriceAlert } from \"@/lib/api\";\nimport Link from \"next/link\";\n\nexport default function AlertsPage() {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n\n  const [alerts, setAlerts] = useState<PriceAlert[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!loading && !user) {\n      router.push(\"/login\");\n    } else if (user) {\n      fetchAlerts();\n    }\n  }, [user, loading, router]);\n\n  const fetchAlerts = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const data = await getPriceAlerts();\n      setAlerts(data);\n    } catch (err) {\n      setError(\"Failed to load price alerts\");\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteAlert = async (id: number) => {\n    try {\n      await deletePriceAlert(id);\n      setAlerts(alerts.filter((alert) => alert.id !== id));\n    } catch (err) {\n      setError(\"Failed to delete alert\");\n      console.error(err);\n    }\n  };\n\n  if (loading || isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-96 bg-slate-50\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-slate-200 border-t-slate-800 rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-slate-700 font-medium\">Loading price alerts...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto my-8 px-6\">\n      <div className=\"bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden\">\n        <div className=\"bg-gradient-to-r from-slate-800 to-slate-700 px-8 py-6 text-white\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <h1 className=\"text-2xl font-bold\">Price Alerts</h1>\n              <p className=\"text-slate-300 mt-1\">\n                Get notified when stocks hit your target prices\n              </p>\n            </div>\n            <Link\n              href=\"/stocks\"\n              className=\"px-5 py-2.5 rounded-lg font-medium shadow-sm transition-all flex items-center bg-emerald-500 hover:bg-emerald-600 text-white\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"18\"\n                height=\"18\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"mr-2\"\n              >\n                <path d=\"M12 5v14M5 12h14\" />\n              </svg>\n              Create New Alert\n            </Link>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {error && (\n            <div className=\"mb-6 bg-rose-50 border-l-4 border-rose-500 text-rose-700 p-4 rounded-md\">\n              {error}\n            </div>\n          )}\n\n          {alerts.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 px-4 bg-slate-50 rounded-xl border border-slate-200 text-center\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"48\"\n                height=\"48\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"1\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"mb-4 text-slate-400\"\n              >\n                <path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\" />\n                <path d=\"M13.73 21a2 2 0 0 1-3.46 0\" />\n              </svg>\n              <h3 className=\"text-lg font-medium text-slate-700 mb-2\">\n                No Price Alerts Set\n              </h3>\n              <p className=\"text-slate-500 max-w-md\">\n                You haven't set any price alerts yet. Create an alert to get\n                notified when a stock hits your target price.\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto border border-slate-200 rounded-xl\">\n              <table className=\"min-w-full divide-y divide-slate-200\">\n                <thead>\n                  <tr className=\"bg-slate-50\">\n                    <th\n                      scope=\"col\"\n                      className=\"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\"\n                    >\n                      Stock\n                    </th>\n                    <th\n                      scope=\"col\"\n                      className=\"px-6 py-4 text-right text-xs font-medium text-slate-500 uppercase tracking-wider\"\n                    >\n                      Target Price\n                    </th>\n                    <th\n                      scope=\"col\"\n                      className=\"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\"\n                    >\n                      Alert Type\n                    </th>\n                    <th\n                      scope=\"col\"\n                      className=\"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\"\n                    >\n                      Status\n                    </th>\n                    <th\n                      scope=\"col\"\n                      className=\"px-6 py-4 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\"\n                    >\n                      Created\n                    </th>\n                    <th\n                      scope=\"col\"\n                      className=\"px-6 py-4 text-center text-xs font-medium text-slate-500 uppercase tracking-wider\"\n                    >\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-slate-200\">\n                  {alerts.map((alert) => (\n                    <tr\n                      key={alert.id}\n                      className=\"hover:bg-slate-50 transition-colors\"\n                    >\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"font-medium text-slate-800\">\n                          {alert.stockSymbol}\n                        </div>\n                        <div className=\"text-sm text-slate-500\">\n                          {alert.stockName}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right\">\n                        <div className=\"font-medium text-slate-700\">\n                          ${alert.targetPrice.toFixed(2)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span\n                          className={`px-3 py-1 rounded-full text-xs font-medium ${\n                            alert.isAboveTarget\n                              ? \"bg-emerald-100 text-emerald-800\"\n                              : \"bg-rose-100 text-rose-800\"\n                          }`}\n                        >\n                          {alert.isAboveTarget ? \"Above\" : \"Below\"}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span\n                          className={`px-3 py-1 rounded-full text-xs font-medium ${\n                            alert.isTriggered\n                              ? \"bg-slate-100 text-slate-800\"\n                              : \"bg-indigo-100 text-indigo-800\"\n                          }`}\n                        >\n                          {alert.isTriggered ? \"Triggered\" : \"Active\"}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-slate-600\">\n                          {new Date(alert.createdAt).toLocaleDateString()}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-center\">\n                        <button\n                          onClick={() => handleDeleteAlert(alert.id)}\n                          className=\"px-3 py-1.5 text-xs bg-rose-500 text-white rounded-md hover:bg-rose-600 transition-colors shadow-sm flex items-center mx-auto\"\n                        >\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            width=\"12\"\n                            height=\"12\"\n                            viewBox=\"0 0 24 24\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            strokeWidth=\"2\"\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            className=\"mr-1\"\n                          >\n                            <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\n                            <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" />\n                            <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" />\n                          </svg>\n                          Remove\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}